<!DOCTYPE html>
<html lang="en">

<head>
    <title>Scenegraph</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <!-- Main Styles Including -->
    <link rel="stylesheet" href="css/style.css">
    <!-- <link rel="stylesheet" href="demo-styles.css"> -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <script src="https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js" defer></script>


</head>

<body>

    <div id="card5 imgbox">
        <!-- Use it like any other HTML element -->
        <model-viewer id="helmet" camera-controls src="./img/test-cm-cm.babylon.glb" ar ar-modes="webxr scene-viewer quick-look" alt="A 3D model of a helmet">
          <div class="controls">
            <div>
              <p>Normals</p>
              <select id="normals">
                <option value="./img/Default_normal.jpg">Damaged helmet</option>
                <option value="./img/Lantern_normal.png">Lantern Pole</option>
                <option value="./img/WaterBottle_normal.png">Water Bottle</option>
              </select>
            </div>
          </div>
        </model-viewer>
    </div>






    <!-- 💁 Include both scripts below to support all browsers! -->

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <!-- Loads <model-viewer> for modern browsers: -->
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
    </script>

    <!-- Loads <model-viewer> for old browsers like IE11: -->
    <script nomodule src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js"></script>
    <script src="js/main.js"></script>

    <script type="module">
      const modelViewerTexture = document.querySelector("model-viewer#helmet");
      
      modelViewerTexture.addEventListener("load", () => {
      
        let material = modelViewerTexture.model.materials[0];
      
        let createAndApplyTexture = async (channel, event) => {
          let texture = await modelViewerTexture.createTexture(event.target.value);
          material[channel].setTexture(texture);
        }
      
        document.querySelector('#normals').addEventListener('input', (event) => {
          createAndApplyTexture('normalTexture', event);
        });
       
      });
      
      </script>

</body>

</html>